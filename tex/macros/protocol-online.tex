\begin{tikzpicture}[>=stealth,xscale=0.35]
    \draw (-4,0) node[draw, minimum width=2cm] (provider) {Provider};
	\draw[dashed] (provider) -- ++(0,-4);

    \draw (4,0) node[draw, minimum width=2cm] (customer) {Customer};
	\draw[dashed] (customer) -- ++(0,-4);

	\draw[->] (-8,-1) -- (-4,-1) node[above, pos=0] {phishing data};
	\draw[->] (-4,-1) -- (-4,-2) node[left, midway] {train classifier};

	\begin{scope}[yshift=-0cm]
		% \draw (0,-1.3) node {BEFORE};
		\draw[->] (8,-2.5) -- (4,-2.5) node[above, midway] {\mail{}};
		\draw[->] (4,-2.3) -- (-4,-2.3) node[above, midway] {payment};
		\draw[->] (4,-2.8) -- (-4,-2.8) node[above, midway] {\textcolor{red}{\mail{}}};
		\draw[->] (-4,-2.8) -- (-4,-3.3) node[left, midway] {classify};
		\draw[->] (-4,-3.3) -- (4,-3.3) node[above, midway] {decision};
		\draw[->] (4,-3.4) -- (8,-3.4) node[above, midway] {filtered};
	\end{scope}
\end{tikzpicture}
